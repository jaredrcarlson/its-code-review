import{_ as A,f as L,g as v,E as F,v as I,K as u,l as b,P as m,x as T,O as P,r as U,o as a,c,a as e,I as w,G as k,J as f,F as _,h as p,i as y,t as n,j as S,N as D,q as N,k as B,p as V,e as q}from"./index-1e2f9b09.js";const M={setup(){const d=L(""),s=L({}),h=v(()=>B.booksToAdd);function o(){try{u.clearBooks(),u.clearSelectedBook()}catch(l){b.log(l),m.error(l.message)}}return F(()=>{o()}),{steps:[{target:"#v-step-0",header:{title:"Let's get started making a bookclub!"},content:"First, search through books and select one to add to your club, the details will appear on the right"},{target:"#v-step-1",content:"Next, click here to add the first book to the list"},{target:"#v-step-2",content:"Finally, fill out the details below to make your club official."}],tourCallBacks:{onFinish:()=>I.editAccount({needsTour:!1}),onSkip:()=>I.editAccount({needsTour:!1})},async searchBooks(){try{u.searchBooks(d.value)}catch(l){b.log(l),m.error(l.message)}},async selectBook(l){try{u.selectBook(l)}catch(r){b.log(r),m.error(r.message)}},addBookToList(){try{u.addBookToList()}catch(l){b.log(l),m.error(l.message)}},removeBookFromList(l){try{u.removeBookFromList(l)}catch(r){b.log(r),m.error(r.message)}},async createClub(){try{const l=await T.createClub(s.value);for(let r=0;r<h.value.length;r++){const C={...h.value[r],author:h.value[r].authors[0],clubId:l._id};u.createClubBook(C)}s.value={},await T.getMyClubs(),P.push({name:"Club About Page",params:{clubId:l.id}})}catch(l){b.log(l),m.error(l.message)}},searchQuery:d,editable:s,books:v(()=>B.books),selectedBook:v(()=>B.selectedBook),booksToAdd:h,account:v(()=>B.account)}}},i=d=>(V("data-v-781a311b"),d=d(),q(),d),R={key:0,class:"container-fluid"},j={class:"row h-100"},Q={class:"col-md-7 col-12"},E={class:"px-2"},G={class:"my-3"},J=i(()=>e("label",{for:"searchBooks",class:"fs-3 form-label"},"Add books to your club!",-1)),K={class:"d-flex me-5"},O=i(()=>e("button",{class:"btn orange-btn"},[e("i",{class:"mdi mdi-magnify"})],-1)),z={key:0,class:"search-list d-flex flex-wrap"},H=["onClick","src"],W={class:"details-section col-md-5 col-12"},X={key:0,class:"row h-100 py-5"},Y={class:"col-5"},Z=["src"],$={class:"col-7 h-100"},ee={class:"d-flex flex-column h-100"},oe={class:"book-description"},te={class:"mb-0"},se={class:"mb-0"},le={class:"col-12 p-3 form-section text-white dark-blue-bg h-100"},ae={class:"row"},ce=i(()=>e("div",{class:"col-12 form-header flex-shrink-1"},[e("h2",null,"Create a Club")],-1)),re={class:"col-md-5 col-12 px-4"},ie=i(()=>e("h4",{class:"mb-2"},"Current Book List",-1)),ne={class:"list-section ghost-bg"},de={key:0,class:"book-list"},ue=["onClick"],be={class:"col-md-7 col-12 py-4"},me={class:"mb-3"},he=i(()=>e("label",{for:"clubName",class:"form-label"},"Club Name",-1)),ke={class:"mb-3"},_e=i(()=>e("label",{for:"clubImageURL",class:"form-label"},"Club Cover Image",-1)),ge={class:"mb-3"},ve=i(()=>e("label",{for:"clubDescription",class:"form-label"},"Club Description",-1)),fe={class:"d-flex justify-content-between"},pe={class:"form-check"},ye=i(()=>e("label",{class:"form-check-label",for:"clubPrivate"}," Is this a Private Club? ",-1)),Be=i(()=>e("button",{type:"submit",class:"ms-auto btn orange-btn"},"Create Club",-1)),Ce={key:1,class:"container-fluid"},xe=i(()=>e("section",{class:"row"},[e("div",{class:"col-12 text-center my-3"},[e("div",{class:"dark-blue-bg text-light p-2 rounded elevation-3"},[e("h2",null," Please log in or sign up to create a book club! ")])])],-1)),Le=[xe];function Ie(d,s,h,o,l,r){const C=U("Tour");return a(),c(_,null,[o.account.id?(a(),c("div",R,[e("section",j,[e("div",Q,[e("div",E,[e("form",{id:"v-step-0",onSubmit:s[1]||(s[1]=w((...t)=>o.searchBooks&&o.searchBooks(...t),["prevent"]))},[e("div",G,[J,e("div",K,[k(e("input",{"onUpdate:modelValue":s[0]||(s[0]=t=>o.searchQuery=t),required:"",type:"text",id:"searchBooks",minlength:"2",maxlength:"50",class:"form-control",placeholder:"Search books..."},null,512),[[f,o.searchQuery]]),O])])],32),o.books.length>0?(a(),c("div",z,[(a(!0),c(_,null,p(o.books,(t,x)=>(a(),c("img",{onClick:g=>o.selectBook(x),class:"m-1",key:t.gbid,src:t.imgUrl,alt:""},null,8,H))),128))])):y("",!0)])]),e("div",W,[o.selectedBook?(a(),c("section",X,[e("div",Y,[e("img",{class:"img-fluid",src:o.selectedBook.imgUrlLarge,alt:""},null,8,Z)]),e("div",$,[e("div",ee,[e("h2",null,n(o.selectedBook.title)+" "+n(o.selectedBook.subtitle),1),e("h3",null,[S("By "),(a(!0),c(_,null,p(o.selectedBook.authors,t=>(a(),c("span",{key:t},n(t),1))),128))]),e("p",oe,n(o.selectedBook.description),1),e("p",te,n(o.selectedBook.pageCount)+" Pages",1),e("p",se,"Published "+n(o.selectedBook.publishedDate.toLocaleDateString()),1),o.booksToAdd.includes(o.selectedBook)?(a(),c("button",{key:1,onClick:s[3]||(s[3]=(...t)=>o.removeBookFromList&&o.removeBookFromList(...t)),class:"btn orange-btn ms-auto"},"Remove From List")):(a(),c("button",{key:0,id:"v-step-1",onClick:s[2]||(s[2]=(...t)=>o.addBookToList&&o.addBookToList(...t)),class:"btn orange-btn ms-auto"},"Add To List"))])])])):y("",!0)]),e("div",le,[e("section",ae,[ce,e("div",re,[ie,e("div",ne,[o.booksToAdd.length>0?(a(),c("ul",de,[(a(!0),c(_,null,p(o.booksToAdd,(t,x)=>(a(),c("li",{key:t.gbid+t.title,class:"d-flex justify-content-between align-items-center"},[e("p",null,[e("span",null,n(t.title)+" "+n(t.subtitle),1),S(" by "),(a(!0),c(_,null,p(t.authors,g=>(a(),c("span",{key:g},n(g),1))),128))]),e("i",{onClick:g=>o.removeBookFromList(x),class:"mdi mdi-trash-can-outline fs-3"},null,8,ue)]))),128))])):y("",!0)])]),e("div",be,[e("form",{onSubmit:s[8]||(s[8]=w((...t)=>o.createClub&&o.createClub(...t),["prevent"])),class:"d-flex flex-column"},[e("div",me,[he,k(e("input",{"onUpdate:modelValue":s[4]||(s[4]=t=>o.editable.name=t),type:"text",required:"",minlength:"3",maxlength:"40",class:"form-control",id:"","aria-describedby":"helpId",placeholder:"Club Name"},null,512),[[f,o.editable.name]])]),e("div",ke,[_e,k(e("input",{"onUpdate:modelValue":s[5]||(s[5]=t=>o.editable.coverImg=t),type:"url",required:"",minlength:"3",maxlength:"300",class:"form-control",id:"clubImageURL","aria-describedby":"helpId",placeholder:"Club Image URL"},null,512),[[f,o.editable.coverImg]])]),e("div",ge,[ve,k(e("textarea",{"onUpdate:modelValue":s[6]||(s[6]=t=>o.editable.description=t),type:"text",required:"",minlength:"3",maxlength:"750",class:"form-control",id:"clubDescription","aria-describedby":"helpId",placeholder:"Club Description"},null,512),[[f,o.editable.description]])]),e("div",fe,[e("div",pe,[k(e("input",{"onUpdate:modelValue":s[7]||(s[7]=t=>o.editable.private=t),class:"form-check-input",type:"checkbox",id:"clubPrivate"},null,512),[[D,o.editable.private]]),ye]),Be])],32)])])])])])):(a(),c("div",Ce,Le)),o.account.needsTour?(a(),N(C,{key:2,steps:o.steps,callbacks:o.tourCallBacks},null,8,["steps","callbacks"])):y("",!0)],64)}const we=A(M,[["render",Ie],["__scopeId","data-v-781a311b"]]);export{we as default};
