import{_ as F,f as m,j as I,h as M,r as D,o as r,c as i,a as e,I as V,G as y,H as x,J as O,F as T,k as q,n as w,K as Q,u as U,P as C,l as j,t as S,b as z,w as E,p as R,e as G}from"./index-f0bb6964.js";const H={setup(){const a=m("keyword"),s=m({printType:"books",orderBy:"newest"}),v=m(""),t=m(""),k=[{key:"intitle",label:"Title"},{key:"inauthor",label:"Author"},{key:"inpublisher",label:"Publisher"},{key:"subject",label:"Category"}],h=m("intitle"),d=m(""),o=m({}),c=I(()=>{let n=[];for(const u of Object.values(o.value))n.push(u);return n});function p(n){return k.find(_=>_.label==n).key}function g(){d.value=d.value.trim(),d.value.replace(" ","+");const u=k.find(_=>_.key==h.value).label;u in o.value?o.value[u]+=`+${h.value}:${d.value}`:o.value[u]=`+${h.value}:${d.value}`,d.value="",f()}function b(n,u){let _=o.value[n].split(`+${p(n)}:`);_=_.filter(A=>A!=u).join(`+${p(n)}:`),_!=""?(o.value[n]=_,f()):B(n)}function B(n){delete o.value[n],f()}function K(){v.value=t.value,c.value.forEach(n=>v.value+=n)}async function f(){P(),K();try{if(v.value=="")return;a.value!="keyword"&&(v.value=`+${a.value}:${t.value}`);const n={q:v.value,printType:s.value.printType,orderBy:s.value.orderBy};await Q.searchBooks(n),U.books.length||C.toast("No Results","info")}catch(n){j.log(n),C.error(n.message)}}const N=m({});function L(n){N.value=n}function P(){try{Q.clearBooks()}catch(n){j.log(n),C.error(n.message)}}return M(()=>{P()}),{searchType:a,queryString:v,queryFields:c,queryTermType:h,queryTermTypeOptions:k,queryTerm:d,queryTerms:o,queryParams:s,query:t,books:I(()=>U.books),activeBook:N,setActiveBook:L,addQueryTerm:g,removeQueryTerm:b,removeQueryTermType:B,getTermTypeKey:p,search:f}}},l=a=>(R("data-v-fb599d76"),a=a(),G(),a),J={class:"container-fluid"},Y={class:"row mt-3"},W={class:"col-12"},X={class:"d-flex justify-content-around"},Z={class:"flex-grow-1 ms-3 me-2"},$={class:"ms-1 text-muted"},ee={key:0},oe={key:1},te={key:2},se={key:3},ne=l(()=>e("option",{selected:"",value:"keyword"},"Keyword",-1)),le=l(()=>e("option",{value:"isbn"},"ISBN",-1)),re=l(()=>e("option",{value:"lccn"},"LCCN",-1)),ie=l(()=>e("option",{value:"oclc"},"OCLC",-1)),de=[ne,le,re,ie],ae=l(()=>e("i",{class:"mdi mdi-magnify fs-4 mx-3"},null,-1)),ce=[ae],ue={key:0,class:"flex-grow-1 ms-2 me-3"},_e=l(()=>e("div",{class:"ms-1 text-muted"},"Narrow Your Search",-1)),me=["value"],ve=l(()=>e("i",{class:"mdi mdi-plus fs-4 mx-3"},null,-1)),ye=[ve],he={key:0,class:"row mt-3"},pe={class:"col-12 d-flex align-items-center"},ge=["onClick"],be=l(()=>e("i",{class:"mdi mdi-trash-can-outline"},null,-1)),ke=[be],fe={class:"rounded-end dark-blue-bg text-light px-2"},xe={class:"d-flex py-2"},Te={class:"mx-1"},qe=l(()=>e("div",{class:"rounded fw-bold mx-1"},[e("i",{class:"mdi mdi-arrow-right-bold"})],-1)),we={key:0,class:"d-flex"},Be={class:"rounded-start light-blue-bg text-light ms-1 px-2"},Ce=["onClick"],Se=l(()=>e("i",{class:"mdi mdi-close-thick"},null,-1)),Ne=[Se],Pe={key:0,class:"mx-1"},Ie=l(()=>e("i",{class:"mdi mdi-plus-thick"},null,-1)),Ve=[Ie],Oe={class:"row mt-3"},Qe={class:"col-12 d-flex align-items-center"},Ue={class:"ms-3"},je=l(()=>e("div",{class:"ms-1 text-muted"},"Print Type",-1)),Ke=l(()=>e("option",{value:"books"},"Books",-1)),Le=l(()=>e("option",{value:"magazines"},"Magazines",-1)),Ae=l(()=>e("option",{value:"all"},"All",-1)),Fe=[Ke,Le,Ae],Me={class:"ms-2"},De=l(()=>e("div",{class:"ms-1 text-muted"},"Order By",-1)),ze=l(()=>e("option",{value:"newest"},"Newest",-1)),Ee=l(()=>e("option",{value:"relevance"},"Relevance",-1)),Re=[ze,Ee],Ge={class:"row mt-3"},He=["src","title"];function Je(a,s,v,t,k,h){const d=D("router-link");return r(),i("div",J,[e("section",Y,[e("div",W,[e("div",X,[e("div",Z,[e("div",$,[t.searchType=="isbn"?(r(),i("div",ee,"International Standard Book Number")):t.searchType=="lccn"?(r(),i("div",oe,"Library of Congress Control Number")):t.searchType=="oclc"?(r(),i("div",te,"Online Computer Library Center Number")):(r(),i("div",se,"Book Search"))]),e("form",{class:"d-flex",onSubmit:s[3]||(s[3]=V(o=>t.search(),["prevent"]))},[y(e("select",{"onUpdate:modelValue":s[0]||(s[0]=o=>t.searchType=o),class:"px-2 rounded-start rounded-end-0 dark-blue-bg text-light"},de,512),[[x,t.searchType]]),y(e("input",{"onUpdate:modelValue":s[1]||(s[1]=o=>t.query=o),class:"border-end-0 rounded-start-0 rounded-end-0 form-control shadow-none",type:"text",placeholder:"Search",required:""},null,512),[[O,t.query]]),e("div",{onClick:s[2]||(s[2]=o=>t.search()),class:"selectable border-0 rounded-end d-flex align-items-center text-light orange-bg"},ce)],32)]),t.searchType=="keyword"?(r(),i("div",ue,[_e,e("form",{class:"d-flex",onSubmit:s[7]||(s[7]=V(o=>t.addQueryTerm(),["prevent"]))},[y(e("select",{"onUpdate:modelValue":s[4]||(s[4]=o=>t.queryTermType=o),class:"rounded-start px-2 dark-blue-bg text-light"},[(r(!0),i(T,null,q(t.queryTermTypeOptions,o=>(r(),i("option",{key:o.key,value:o.key},S(o.label),9,me))),128))],512),[[x,t.queryTermType]]),y(e("input",{"onUpdate:modelValue":s[5]||(s[5]=o=>t.queryTerm=o),class:"border-end-0 rounded-start-0 rounded-end-0 form-control shadow-none",type:"text",placeholder:"includes ...",required:""},null,512),[[O,t.queryTerm]]),e("div",{onClick:s[6]||(s[6]=o=>t.addQueryTerm()),class:"selectable border-0 rounded-end d-flex align-items-center text-light light-blue-bg"},ye)],32)])):w("",!0)])])]),t.searchType=="keyword"?(r(),i("section",he,[e("div",pe,[(r(!0),i(T,null,q(t.queryTerms,(o,c,p)=>(r(),i("div",{key:`a${p}`,class:"ms-3 d-flex"},[e("div",{onClick:g=>t.removeQueryTermType(c),class:"selectable rounded-start bg-danger text-light px-2 d-flex align-items-center"},ke,8,ge),e("div",fe,[e("div",xe,[e("div",Te,S(c),1),qe,(r(!0),i(T,null,q(o.split(`+${t.getTermTypeKey(c)}:`),(g,b)=>(r(),i("div",{key:`b${b}`},[b!=0?(r(),i("div",we,[e("div",Be,S(g),1),e("div",{onClick:B=>t.removeQueryTerm(c,g),class:"selectable rounded-end bg-danger text-light me-1 px-1"},Ne,8,Ce),b+1!=o.split(`+${t.getTermTypeKey(c)}:`).length?(r(),i("div",Pe,Ve)):w("",!0)])):w("",!0)]))),128))])])]))),128))])])):w("",!0),e("section",Oe,[e("div",Qe,[e("div",Ue,[je,y(e("select",{onChange:s[8]||(s[8]=o=>t.search()),"onUpdate:modelValue":s[9]||(s[9]=o=>t.queryParams.printType=o),class:"px-1 rounded dark-blue-bg text-light"},Fe,544),[[x,t.queryParams.printType]])]),e("div",Me,[De,y(e("select",{onChange:s[10]||(s[10]=o=>t.search()),"onUpdate:modelValue":s[11]||(s[11]=o=>t.queryParams.orderBy=o),class:"px-1 rounded dark-blue-bg text-light"},Re,544),[[x,t.queryParams.orderBy]])])])]),e("section",Ge,[(r(!0),i(T,null,q(t.books,o=>(r(),i("div",{key:o.id,class:"col-md-1 col-6 my-1"},[z(d,{to:{name:"Book Details",params:{gbId:o.gbId}}},{default:E(()=>[e("img",{class:"img-fluid book-img",src:o.imgUrl,title:o.title},null,8,He)]),_:2},1032,["to"])]))),128))])])}const We=F(H,[["render",Je],["__scopeId","data-v-fb599d76"]]);export{We as default};
