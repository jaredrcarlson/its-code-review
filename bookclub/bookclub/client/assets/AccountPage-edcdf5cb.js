import{_ as M,f as x,g as I,h as D,i as C,j as d,P as b,l as L,m as S,r as y,o as e,c,a as t,t as u,F as _,k as f,n as p,q as v,b as m,w as P,s as T,u as i,p as R,e as V}from"./index-2c867299.js";const j={setup(){let l=x(!1);const k=x(null);function h(){k.value=window.innerWidth}return I(()=>{h(),window.addEventListener("resize",h)}),D(()=>{window.removeEventListener("resize",h)}),{steps:[{target:"#v-step-0",header:{title:"Welcome to the Profile Page!"},content:"Here, you'll find a bio about the user, and a list of the clubs that the user is in"},{target:"#v-step-1",content:"Down here, the user's added books will be listed, and they can rate their book, remove from the list, and mark their progress"}],tourCallBacks:{onFinish:()=>C.editAccount({needsTour:!1}),onSkip:()=>C.editAccount({needsTour:!1})},loadingRef:l,computedDescription(s,n){return s.length>100?s.substring(0,n)+"...":s},width:k,account:d(()=>i.account),myMemberships:d(()=>i.myMemberships?i.myMemberships.filter(s=>s.club&&s.status=="joined"):[]),myBooks:d(()=>i.myBooks),finishedBooks:d(()=>{var n;return(n=i.myBooks)==null?void 0:n.filter(r=>r.status=="finished")}),plannedBooks:d(()=>{var n;return(n=i.myBooks)==null?void 0:n.filter(r=>r.status=="planned")}),currentBooks:d(()=>{var n;return(n=i.myBooks)==null?void 0:n.filter(r=>r.status=="reading")}),async leaveClub(s){try{if(!await b.confirm("Are you sure you want to leave this club?"))return;l.value=!0,L.log(s),await S.leaveClub(s),b.success("You have left this club."),l.value=!1}catch(n){b.error(n.message)}}}}},a=l=>(R("data-v-3ac8e40f"),l=l(),V(),l),F={key:0,class:"container-fluid"},H={class:"row"},N={class:"col-12 p-0"},z={class:"image-container"},E=["src","alt"],U={class:"account-name"},W={class:"fs-2 pe-2 m-0"},q=["alt"],G=["src","alt"],Y={class:"row mt-5"},J={class:"col-12 mt-5"},K={class:"m-3"},O=a(()=>t("span",{id:"v-step-0",class:"fs-2"}," About Me: ",-1)),Q={class:"fs-4"},X=a(()=>t("section",{class:"row"},[t("div",{class:"col-12"},[t("p",{class:"m-3 fs-1"}," My Clubs ")])],-1)),Z={key:0,class:"row mb-4"},$={class:"membership-card mx-3"},tt=["src"],st={class:"dark-blue-bg p-3 text-light card-description"},ot={class:"fs-5"},et={key:0},ct={key:1},nt={key:2,class:"mt-auto"},at=["onClick"],lt=a(()=>t("i",{class:"mdi mdi-account-minus"},null,-1)),it={class:"row mb-4"},rt={id:"v-step-1",class:"col-12"},dt={class:"m-3 fs-1"},ut=a(()=>t("span",{class:"pe-3"}," My Booklist ",-1)),_t={class:"fs-3 pe-4"},mt=a(()=>t("i",{class:"mdi mdi-book-multiple"},null,-1)),ht=a(()=>t("button",{class:"btn orange-btn",title:"Add a Book to My List"},[t("i",{class:"mdi mdi-book-plus"}),v(" Add a Book to My List ")],-1)),ft={class:"row mb-4"},pt={class:"col-12"},kt={style:{"overflow-x":"auto"},class:"ms-3"},gt={id:"books"},bt=a(()=>t("tr",null,[t("th",{class:"ps-2"}," Title "),t("th",{class:"ps-2"}," Progress "),t("th",{class:"ps-2 text-center"}," Rating "),t("th",{class:"ps-2 text-end"}," Timestamp "),t("th")],-1)),yt=a(()=>t("tr",null,[t("td",{class:"large-text-style fs-4 orange-text"},"Currently Reading"),t("td"),t("td"),t("td"),t("td")],-1)),vt=a(()=>t("tr",null,[t("td",{class:"large-text-style fs-4 orange-text"},"Planning to Read"),t("td"),t("td"),t("td"),t("td")],-1)),Bt=a(()=>t("tr",null,[t("td",{class:"large-text-style fs-4 orange-text"},"Finished Books"),t("td"),t("td"),t("td"),t("td")],-1)),wt=a(()=>t("section",{class:"row justify-content-center"},[t("div",{class:"col-10 my-3"})],-1));function xt(l,k,h,s,n,r){var w;const B=y("router-link"),g=y("UserBookListItem"),A=y("Tour");return e(),c(_,null,[s.account.id?(e(),c("div",F,[t("section",H,[t("div",N,[t("div",z,[t("img",{class:"img-fluid account-img me-4",src:s.account.picture,alt:s.account.name},null,8,E),t("div",U,[t("p",W,u(s.account.name),1)]),s.account.coverImg?(e(),c("img",{key:1,class:"coverImg-style img-fluid",src:s.account.coverImg,alt:s.account.name},null,8,G)):(e(),c("img",{key:0,class:"coverImg-style img-fluid",src:"https://images.unsplash.com/photo-1551043047-1d2adf00f3fa?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1170&q=80",alt:s.account.name},null,8,q))])])]),t("section",Y,[t("div",J,[t("p",K,[O,t("span",Q,u(s.account.bio),1)])])]),X,Array.isArray(s.myMemberships)&&s.account.id?(e(),c("section",Z,[(e(!0),c(_,null,f(s.myMemberships,o=>(e(),c("div",{class:"col-md-4 col-12 my-3",key:o.id},[t("div",$,[m(B,{to:{name:"Club About Page",params:{clubId:o.club.id}}},{default:P(()=>[t("img",{class:"img-fluid card-img",src:o.club.coverImg,alt:"card img"},null,8,tt)]),_:2},1032,["to"]),t("div",st,[t("p",ot,u(o.club.name),1),s.width>1350?(e(),c("p",et,u(s.computedDescription(o.club.description,125)),1)):(e(),c("p",ct,u(s.computedDescription(o.club.description,25)),1)),s.loadingRef==!1&&o.role!="creator"?(e(),c("div",nt,[t("button",{class:"btn orange-btn",onClick:Ct=>s.leaveClub(o.id),title:"Leave Club"},[lt,v(" Leave Club ")],8,at)])):p("",!0)])])]))),128))])):p("",!0),t("section",it,[t("div",rt,[t("p",dt,[ut,t("span",_t,[mt,v(" "+u((w=s.myBooks)==null?void 0:w.length),1)]),t("span",null,[m(B,{to:{name:"Book Search"}},{default:P(()=>[ht]),_:1})])])])]),t("section",ft,[t("div",pt,[t("div",kt,[t("table",gt,[bt,yt,(e(!0),c(_,null,f(s.currentBooks,o=>(e(),c("tr",{key:o.id},[m(g,{bookProp:o},null,8,["bookProp"])]))),128)),vt,(e(!0),c(_,null,f(s.plannedBooks,o=>(e(),c("tr",{key:o.id},[m(g,{bookProp:o},null,8,["bookProp"])]))),128)),Bt,(e(!0),c(_,null,f(s.finishedBooks,o=>(e(),c("tr",{key:o.id},[m(g,{bookProp:o},null,8,["bookProp"])]))),128))])])])]),wt])):p("",!0),s.account.needsTour?(e(),T(A,{key:1,steps:s.steps,callbacks:s.tourCallBacks},null,8,["steps","callbacks"])):p("",!0)],64)}const At=M(j,[["render",xt],["__scopeId","data-v-3ac8e40f"]]);export{At as default};
