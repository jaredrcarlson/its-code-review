import{_ as S,f as x,g,D as T,J as b,l as m,P as u,v as L,N as P,o as a,c,a as e,H as I,E as _,I as v,F as f,h as y,i as C,t as n,j as w,L as U,k as p,p as D,e as A}from"./index-160b4c87.js";const F={setup(){const d=x(""),t=x({}),h=g(()=>p.booksToAdd);function o(){try{b.clearBooks(),b.clearSelectedBook()}catch(l){m.log(l),u.error(l.message)}}return T(()=>{o()}),{async searchBooks(){try{b.searchBooks(d.value)}catch(l){m.log(l),u.error(l.message)}},async selectBook(l){try{b.selectBook(l)}catch(r){m.log(r),u.error(r.message)}},addBookToList(){try{b.addBookToList()}catch(l){m.log(l),u.error(l.message)}},removeBookFromList(l){try{b.removeBookFromList(l)}catch(r){m.log(r),u.error(r.message)}},async createClub(){try{const l=await L.createClub(t.value);for(let r=0;r<h.value.length;r++){const s={...h.value[r],author:h.value[r].authors[0],clubId:l._id};b.createClubBook(s)}t.value={},await L.getMyClubs(),P.push({name:"Club About Page",params:{clubId:l.id}})}catch(l){m.log(l),u.error(l.message)}},searchQuery:d,editable:t,books:g(()=>p.books),selectedBook:g(()=>p.selectedBook),booksToAdd:h,account:g(()=>p.account)}}},i=d=>(D("data-v-c27bfd29"),d=d(),A(),d),V={key:0,class:"container-fluid"},N={class:"row h-100"},q={class:"col-md-7 col-12"},M={class:"px-2"},R={class:"my-3"},j=i(()=>e("label",{for:"searchBooks",class:"fs-3 form-label"},"Add books to your club!",-1)),Q={class:"d-flex me-5"},E=i(()=>e("button",{class:"btn orange-btn"},[e("i",{class:"mdi mdi-magnify"})],-1)),H={key:0,class:"search-list d-flex flex-wrap"},J=["onClick","src"],z={class:"details-section col-md-5 col-12"},G={key:0,class:"row h-100 py-5"},K={class:"col-5"},O=["src"],W={class:"col-7 h-100"},X={class:"d-flex flex-column h-100"},Y={class:"book-description"},Z={class:"mb-0"},$={class:"mb-0"},ee={class:"col-12 p-3 form-section text-white dark-blue-bg h-100"},oe={class:"row"},se=i(()=>e("div",{class:"col-12 form-header flex-shrink-1"},[e("h2",null,"Create a Club")],-1)),te={class:"col-md-5 col-12 px-4"},le=i(()=>e("h4",{class:"mb-2"},"Current Book List",-1)),ae={class:"list-section ghost-bg"},ce={key:0,class:"book-list"},re=["onClick"],ie={class:"col-md-7 col-12 py-4"},ne={class:"mb-3"},de=i(()=>e("label",{for:"clubName",class:"form-label"},"Club Name",-1)),be={class:"mb-3"},me=i(()=>e("label",{for:"clubImageURL",class:"form-label"},"Club Cover Image",-1)),ue={class:"mb-3"},he=i(()=>e("label",{for:"clubDescription",class:"form-label"},"Club Description",-1)),_e={class:"d-flex justify-content-between"},ke={class:"form-check"},ge=i(()=>e("label",{class:"form-check-label",for:"clubPrivate"}," Is this a Private Club? ",-1)),ve=i(()=>e("button",{type:"submit",class:"ms-auto btn orange-btn"},"Create Club",-1)),fe={key:1,class:"container-fluid"},ye=i(()=>e("section",{class:"row"},[e("div",{class:"col-12 text-center my-3"},[e("div",{class:"dark-blue-bg text-light p-2 rounded elevation-3"},[e("h2",null," Please log in or sign up to create a book club! ")])])],-1)),pe=[ye];function Be(d,t,h,o,l,r){return o.account.id?(a(),c("div",V,[e("section",N,[e("div",q,[e("div",M,[e("form",{onSubmit:t[1]||(t[1]=I((...s)=>o.searchBooks&&o.searchBooks(...s),["prevent"]))},[e("div",R,[j,e("div",Q,[_(e("input",{"onUpdate:modelValue":t[0]||(t[0]=s=>o.searchQuery=s),required:"",type:"text",id:"searchBooks",minlength:"2",maxlength:"50",class:"form-control",placeholder:"Search books..."},null,512),[[v,o.searchQuery]]),E])])],32),o.books.length>0?(a(),c("div",H,[(a(!0),c(f,null,y(o.books,(s,B)=>(a(),c("img",{onClick:k=>o.selectBook(B),class:"m-1",key:s.gbid,src:s.imgUrl,alt:""},null,8,J))),128))])):C("",!0)])]),e("div",z,[o.selectedBook?(a(),c("section",G,[e("div",K,[e("img",{class:"img-fluid",src:o.selectedBook.imgUrlLarge,alt:""},null,8,O)]),e("div",W,[e("div",X,[e("h2",null,n(o.selectedBook.title)+" "+n(o.selectedBook.subtitle),1),e("h3",null,[w("By "),(a(!0),c(f,null,y(o.selectedBook.authors,s=>(a(),c("span",{key:s},n(s),1))),128))]),e("p",Y,n(o.selectedBook.description),1),e("p",Z,n(o.selectedBook.pageCount)+" Pages",1),e("p",$,"Published "+n(o.selectedBook.publishedDate.toLocaleDateString()),1),o.booksToAdd.includes(o.selectedBook)?(a(),c("button",{key:1,onClick:t[3]||(t[3]=(...s)=>o.removeBookFromList&&o.removeBookFromList(...s)),class:"btn orange-btn ms-auto"},"Remove From List")):(a(),c("button",{key:0,onClick:t[2]||(t[2]=(...s)=>o.addBookToList&&o.addBookToList(...s)),class:"btn orange-btn ms-auto"},"Add To List"))])])])):C("",!0)]),e("div",ee,[e("section",oe,[se,e("div",te,[le,e("div",ae,[o.booksToAdd.length>0?(a(),c("ul",ce,[(a(!0),c(f,null,y(o.booksToAdd,(s,B)=>(a(),c("li",{key:s.gbid+s.title,class:"d-flex justify-content-between align-items-center"},[e("p",null,[e("span",null,n(s.title)+" "+n(s.subtitle),1),w(" by "),(a(!0),c(f,null,y(s.authors,k=>(a(),c("span",{key:k},n(k),1))),128))]),e("i",{onClick:k=>o.removeBookFromList(B),class:"mdi mdi-trash-can-outline fs-3"},null,8,re)]))),128))])):C("",!0)])]),e("div",ie,[e("form",{onSubmit:t[8]||(t[8]=I((...s)=>o.createClub&&o.createClub(...s),["prevent"])),class:"d-flex flex-column"},[e("div",ne,[de,_(e("input",{"onUpdate:modelValue":t[4]||(t[4]=s=>o.editable.name=s),type:"text",required:"",minlength:"3",maxlength:"40",class:"form-control",id:"","aria-describedby":"helpId",placeholder:"Club Name"},null,512),[[v,o.editable.name]])]),e("div",be,[me,_(e("input",{"onUpdate:modelValue":t[5]||(t[5]=s=>o.editable.coverImg=s),type:"url",required:"",minlength:"3",maxlength:"300",class:"form-control",id:"clubImageURL","aria-describedby":"helpId",placeholder:"Club Image URL"},null,512),[[v,o.editable.coverImg]])]),e("div",ue,[he,_(e("textarea",{"onUpdate:modelValue":t[6]||(t[6]=s=>o.editable.description=s),type:"text",required:"",minlength:"3",maxlength:"750",class:"form-control",id:"clubDescription","aria-describedby":"helpId",placeholder:"Club Description"},null,512),[[v,o.editable.description]])]),e("div",_e,[e("div",ke,[_(e("input",{"onUpdate:modelValue":t[7]||(t[7]=s=>o.editable.private=s),class:"form-check-input",type:"checkbox",id:"clubPrivate"},null,512),[[U,o.editable.private]]),ge]),ve])],32)])])])])])):(a(),c("div",fe,pe))}const xe=S(F,[["render",Be],["__scopeId","data-v-c27bfd29"]]);export{xe as default};
