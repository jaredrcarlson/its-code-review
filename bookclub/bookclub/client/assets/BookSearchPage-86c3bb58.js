import{_ as F,f as _,j as I,h as M,r as D,o as r,c as d,a as e,I as V,G as y,H as x,J as O,F as T,k as q,n as w,K as Q,u as U,P as C,l as j,t as S,b as z,w as E,p as R,e as G}from"./index-627609b6.js";const H={setup(){const a=_("keyword"),s=_({printType:"books",orderBy:"newest"}),v=_(""),o=_(""),b=[{key:"intitle",label:"Title"},{key:"inauthor",label:"Author"},{key:"inpublisher",label:"Publisher"},{key:"subject",label:"Category"}],h=_("intitle"),i=_(""),t=_({}),c=I(()=>{let n=[];for(const u of Object.values(t.value))n.push(u);return n});function p(n){return b.find(m=>m.label==n).key}function g(){i.value=i.value.trim(),i.value.replace(" ","+");const u=b.find(m=>m.key==h.value).label;u in t.value?t.value[u]+=`+${h.value}:${i.value}`:t.value[u]=`+${h.value}:${i.value}`,i.value="",k()}function f(n,u){let m=t.value[n].split(`+${p(n)}:`);m=m.filter(A=>A!=u).join(`+${p(n)}:`),m!=""?(t.value[n]=m,k()):B(n)}function B(n){delete t.value[n],k()}function K(){v.value=o.value,c.value.forEach(n=>v.value+=n)}async function k(){P(),K();try{if(v.value=="")return;a.value!="keyword"&&(v.value=`+${a.value}:${o.value}`);const n={q:v.value,printType:s.value.printType,orderBy:s.value.orderBy};await Q.searchBooks(n),U.books.length||C.toast("No Results","info")}catch(n){j.log(n),C.error(n.message)}}const N=_({});function L(n){N.value=n}function P(){try{Q.clearBooks()}catch(n){j.log(n),C.error(n.message)}}return M(()=>{P()}),{searchType:a,queryString:v,queryFields:c,queryTermType:h,queryTermTypeOptions:b,queryTerm:i,queryTerms:t,queryParams:s,query:o,books:I(()=>U.books),activeBook:N,setActiveBook:L,addQueryTerm:g,removeQueryTerm:f,removeQueryTermType:B,getTermTypeKey:p,search:k}}},l=a=>(R("data-v-16cffa3a"),a=a(),G(),a),J={class:"container-fluid"},Y={class:"row"},W={class:"col-12 d-md-flex justify-content-between"},X={class:"flex-grow-1 ms-md-3 mt-2 mt-md-3"},Z={class:"ms-1 text-muted"},$={key:0},ee={key:1},te={key:2},oe={key:3},se=l(()=>e("option",{selected:"",value:"keyword"},"Keyword",-1)),ne=l(()=>e("option",{value:"isbn"},"ISBN",-1)),le=l(()=>e("option",{value:"lccn"},"LCCN",-1)),re=l(()=>e("option",{value:"oclc"},"OCLC",-1)),de=[se,ne,le,re],ie=l(()=>e("i",{class:"mdi mdi-magnify fs-4 mx-3"},null,-1)),ae=[ie],ce={key:0,class:"flex-grow-1 mt-2 mt-md-3 mx-md-4"},ue=l(()=>e("div",{class:"ms-1 text-muted"},"Narrow Your Search",-1)),me=["value"],_e=l(()=>e("i",{class:"mdi mdi-plus fs-4 mx-3"},null,-1)),ve=[_e],ye={class:"d-flex mt-2 mt-md-3 align-items-center"},he={class:"me-3"},pe=l(()=>e("div",{class:"ms-1 text-muted"},"Print Type",-1)),ge=l(()=>e("option",{value:"books"},"Books",-1)),fe=l(()=>e("option",{value:"magazines"},"Magazines",-1)),be=l(()=>e("option",{value:"all"},"All",-1)),ke=[ge,fe,be],xe={class:"me-md-3"},Te=l(()=>e("div",{class:"ms-1 text-muted"},"Order By",-1)),qe=l(()=>e("option",{value:"newest"},"Newest",-1)),we=l(()=>e("option",{value:"relevance"},"Relevance",-1)),Be=[qe,we],Ce={key:0,class:"row"},Se={class:"col-12 d-md-flex align-items-center"},Ne=["onClick"],Pe=l(()=>e("i",{class:"mdi mdi-trash-can-outline"},null,-1)),Ie=[Pe],Ve={class:"rounded-end dark-blue-bg text-light px-2"},Oe={class:"d-flex py-2"},Qe={class:"mx-1"},Ue=l(()=>e("div",{class:"rounded fw-bold mx-1"},[e("i",{class:"mdi mdi-arrow-right-bold"})],-1)),je={key:0,class:"d-flex"},Ke={class:"rounded-start light-blue-bg text-light ms-1 px-2"},Le=["onClick"],Ae=l(()=>e("i",{class:"mdi mdi-close-thick"},null,-1)),Fe=[Ae],Me={key:0,class:"mx-1"},De=l(()=>e("i",{class:"mdi mdi-plus-thick"},null,-1)),ze=[De],Ee={class:"row mt-2 p-md-3"},Re=["src","title"];function Ge(a,s,v,o,b,h){const i=D("router-link");return r(),d("div",J,[e("section",Y,[e("div",W,[e("div",X,[e("div",Z,[o.searchType=="isbn"?(r(),d("div",$,"International Standard Book Number")):o.searchType=="lccn"?(r(),d("div",ee,"Library of Congress Control Number")):o.searchType=="oclc"?(r(),d("div",te,"Online Computer Library Center Number")):(r(),d("div",oe,"Book Search"))]),e("form",{class:"d-flex",onSubmit:s[3]||(s[3]=V(t=>o.search(),["prevent"]))},[y(e("select",{"onUpdate:modelValue":s[0]||(s[0]=t=>o.searchType=t),class:"px-2 rounded-start rounded-end-0 dark-blue-bg text-light"},de,512),[[x,o.searchType]]),y(e("input",{"onUpdate:modelValue":s[1]||(s[1]=t=>o.query=t),class:"border-end-0 rounded-start-0 rounded-end-0 form-control shadow-none",type:"text",placeholder:"Search",required:""},null,512),[[O,o.query]]),e("div",{onClick:s[2]||(s[2]=t=>o.search()),class:"selectable border-0 rounded-end d-flex align-items-center text-light orange-bg"},ae)],32)]),o.searchType=="keyword"?(r(),d("div",ce,[ue,e("form",{class:"d-flex",onSubmit:s[7]||(s[7]=V(t=>o.addQueryTerm(),["prevent"]))},[y(e("select",{"onUpdate:modelValue":s[4]||(s[4]=t=>o.queryTermType=t),class:"rounded-start px-2 dark-blue-bg text-light"},[(r(!0),d(T,null,q(o.queryTermTypeOptions,t=>(r(),d("option",{key:t.key,value:t.key},S(t.label),9,me))),128))],512),[[x,o.queryTermType]]),y(e("input",{"onUpdate:modelValue":s[5]||(s[5]=t=>o.queryTerm=t),class:"border-end-0 rounded-start-0 rounded-end-0 form-control shadow-none",type:"text",placeholder:"includes ...",required:""},null,512),[[O,o.queryTerm]]),e("div",{onClick:s[6]||(s[6]=t=>o.addQueryTerm()),class:"selectable border-0 rounded-end d-flex align-items-center text-light light-blue-bg"},ve)],32)])):w("",!0),e("div",ye,[e("div",he,[pe,y(e("select",{onChange:s[8]||(s[8]=t=>o.search()),"onUpdate:modelValue":s[9]||(s[9]=t=>o.queryParams.printType=t),class:"px-1 rounded dark-blue-bg text-light pt-1 pb-1"},ke,544),[[x,o.queryParams.printType]])]),e("div",xe,[Te,y(e("select",{onChange:s[10]||(s[10]=t=>o.search()),"onUpdate:modelValue":s[11]||(s[11]=t=>o.queryParams.orderBy=t),class:"px-1 rounded dark-blue-bg text-light pt-1 pb-1"},Be,544),[[x,o.queryParams.orderBy]])])])])]),o.searchType=="keyword"?(r(),d("section",Ce,[e("div",Se,[(r(!0),d(T,null,q(o.queryTerms,(t,c,p)=>(r(),d("div",{key:`a${p}`,class:"ms-md-3 d-flex mt-2 mt-md-3"},[e("div",{onClick:g=>o.removeQueryTermType(c),class:"selectable rounded-start bg-danger text-light px-2 d-flex align-items-center"},Ie,8,Ne),e("div",Ve,[e("div",Oe,[e("div",Qe,S(c),1),Ue,(r(!0),d(T,null,q(t.split(`+${o.getTermTypeKey(c)}:`),(g,f)=>(r(),d("div",{key:`b${f}`},[f!=0?(r(),d("div",je,[e("div",Ke,S(g),1),e("div",{onClick:B=>o.removeQueryTerm(c,g),class:"selectable rounded-end bg-danger text-light me-1 px-1"},Fe,8,Le),f+1!=t.split(`+${o.getTermTypeKey(c)}:`).length?(r(),d("div",Me,ze)):w("",!0)])):w("",!0)]))),128))])])]))),128))])])):w("",!0),e("section",Ee,[(r(!0),d(T,null,q(o.books,t=>(r(),d("div",{key:t.id,class:"col-md-1 col-6 my-1"},[z(i,{to:{name:"Book Details",params:{gbId:t.gbId}}},{default:E(()=>[e("img",{class:"img-fluid book-img rounded elevation-2",src:t.imgUrl,title:t.title},null,8,Re)]),_:2},1032,["to"])]))),128))])])}const Je=F(H,[["render",Ge],["__scopeId","data-v-16cffa3a"]]);export{Je as default};
