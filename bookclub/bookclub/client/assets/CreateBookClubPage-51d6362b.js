import{_ as S,f as L,V as P,j as f,g as U,h as A,i as F,K as u,l as b,P as m,y as I,r as D,o as a,c,a as e,I as T,G as k,J as p,F as _,k as y,n as B,t as n,q as w,N as V,s as N,u as C,p as q,e as M}from"./index-fed22fc1.js";const R={setup(){const d=L(""),s=P(),g=L({}),o=f(()=>C.booksToAdd);function x(){try{u.clearBooks(),u.clearSelectedBook()}catch(l){b.log(l),m.error(l.message)}}return U(()=>{x()}),A(()=>{x()}),{steps:[{target:"#v-step-0",header:{title:"Let's get started making a bookclub!"},content:"First, search through books and select one to add to your club, the details will appear on the right"},{target:"#v-step-1",content:"Next, click here to add the first book to the list"},{target:"#v-step-2",content:"Finally, fill out the details below to make your club official."}],tourCallBacks:{onSkip:()=>F.editAccount({needsTour:!1})},async searchBooks(){try{u.searchBooks({q:d.value})}catch(l){b.log(l),m.error(l.message)}},async selectBook(l){try{u.selectBook(l)}catch(r){b.log(r),m.error(r.message)}},addBookToList(){try{u.addBookToList()}catch(l){b.log(l),m.error(l.message)}},removeBookFromList(l){try{u.removeBookFromList(l)}catch(r){b.log(r),m.error(r.message)}},async createClub(){try{const l=await I.createClub(g.value);for(let r=0;r<o.value.length;r++){const t={...o.value[r],author:o.value[r].authors[0],clubId:l._id};u.createClubBook(t)}g.value={},await I.getMyClubs(),s.push({name:"Club About Page",params:{clubId:l.id}})}catch(l){b.log(l),m.error(l.message)}},searchQuery:d,editable:g,books:f(()=>C.books),selectedBook:f(()=>C.selectedBook),booksToAdd:o,account:f(()=>C.account)}}},i=d=>(q("data-v-d87e3291"),d=d(),M(),d),j={key:0,class:"container-fluid"},Q={class:"row h-100"},E={class:"col-md-7 col-12"},G={class:"px-2"},J={class:"my-3"},K=i(()=>e("label",{for:"searchBooks",class:"fs-3 form-label"},"Add books to your club!",-1)),z={class:"d-flex me-5"},H=i(()=>e("button",{class:"btn orange-btn"},[e("i",{class:"mdi mdi-magnify"})],-1)),O={key:0,class:"search-list d-flex flex-wrap"},W=["onClick","src"],X={class:"details-section col-md-5 col-12"},Y={key:0,class:"row h-100 py-5"},Z={class:"col-5"},$=["src"],ee={class:"col-7 h-100"},oe={class:"d-flex flex-column h-100"},te={class:"book-description"},se={class:"mb-0"},le={class:"mb-0"},ae={class:"col-12 p-3 form-section text-white dark-blue-bg h-100"},ce={class:"row"},re=i(()=>e("div",{class:"col-12 form-header flex-shrink-1"},[e("h2",{id:"v-step-2"},"Create a Club")],-1)),ie={class:"col-md-5 col-12 px-4"},ne=i(()=>e("h4",{class:"mb-2"},"Current Book List",-1)),de={class:"list-section ghost-bg"},ue={key:0,class:"book-list"},be=["onClick"],me=["onClick"],he={class:"col-md-7 col-12 py-4"},ke={class:"mb-3"},_e=i(()=>e("label",{for:"clubName",class:"form-label"},"Club Name",-1)),ge={class:"mb-3"},ve=i(()=>e("label",{for:"clubImageURL",class:"form-label"},"Club Cover Image",-1)),fe={class:"mb-3"},pe=i(()=>e("label",{for:"clubDescription",class:"form-label"},"Club Description",-1)),ye={class:"d-flex justify-content-between"},Be={class:"form-check"},Ce=i(()=>e("label",{class:"form-check-label",for:"clubPrivate"}," Is this a Private Club? ",-1)),xe=i(()=>e("button",{type:"submit",class:"ms-auto btn orange-btn"},"Create Club",-1)),Le={key:1,class:"container-fluid"},Ie=i(()=>e("section",{class:"row"},[e("div",{class:"col-12 text-center my-3"},[e("div",{class:"dark-blue-bg text-light p-2 rounded elevation-3"},[e("h2",null," Please log in or sign up to create a book club! ")])])],-1)),Te=[Ie];function we(d,s,g,o,x,l){const r=D("Tour");return a(),c(_,null,[o.account.id?(a(),c("div",j,[e("section",Q,[e("div",E,[e("div",G,[e("form",{id:"v-step-0",onSubmit:s[1]||(s[1]=T((...t)=>o.searchBooks&&o.searchBooks(...t),["prevent"]))},[e("div",J,[K,e("div",z,[k(e("input",{"onUpdate:modelValue":s[0]||(s[0]=t=>o.searchQuery=t),required:"",type:"text",id:"searchBooks",minlength:"2",maxlength:"50",class:"form-control",placeholder:"Search books..."},null,512),[[p,o.searchQuery]]),H])])],32),o.books.length>0?(a(),c("div",O,[(a(!0),c(_,null,y(o.books,(t,v)=>(a(),c("img",{onClick:h=>o.selectBook(v),class:"m-1",key:t.gbid,src:t.imgUrl,alt:""},null,8,W))),128))])):B("",!0)])]),e("div",X,[o.selectedBook?(a(),c("section",Y,[e("div",Z,[e("img",{class:"img-fluid",src:o.selectedBook.imgUrlLarge,alt:""},null,8,$)]),e("div",ee,[e("div",oe,[e("h2",null,n(o.selectedBook.title)+" "+n(o.selectedBook.subtitle),1),e("h3",null,[w("By "),(a(!0),c(_,null,y(o.selectedBook.authors,t=>(a(),c("span",{key:t},n(t),1))),128))]),e("p",te,n(o.selectedBook.description),1),e("p",se,n(o.selectedBook.pageCount)+" Pages",1),e("p",le,"Published "+n(o.selectedBook.publishedDate.toLocaleDateString()),1),o.booksToAdd.includes(o.selectedBook)?(a(),c("button",{key:1,onClick:s[3]||(s[3]=(...t)=>o.removeBookFromList&&o.removeBookFromList(...t)),class:"btn orange-btn ms-auto"},"Remove From List")):(a(),c("button",{key:0,id:"v-step-1",onClick:s[2]||(s[2]=(...t)=>o.addBookToList&&o.addBookToList(...t)),class:"btn orange-btn ms-auto"},"Add To List"))])])])):B("",!0)]),e("div",ae,[e("section",ce,[re,e("div",ie,[ne,e("div",de,[o.booksToAdd.length>0?(a(),c("ul",ue,[(a(!0),c(_,null,y(o.booksToAdd,(t,v)=>(a(),c("li",{key:t.gbid+t.title,class:"d-flex justify-content-between align-items-center"},[e("p",{onClick:h=>o.selectBook(v),class:"selectable"},[e("span",null,n(t.title)+" "+n(t.subtitle),1),w(" by "),(a(!0),c(_,null,y(t.authors,h=>(a(),c("span",{key:h},n(h),1))),128))],8,be),e("i",{onClick:h=>o.removeBookFromList(v),class:"mdi trash mdi-trash-can-outline fs-3"},null,8,me)]))),128))])):B("",!0)])]),e("div",he,[e("form",{onSubmit:s[8]||(s[8]=T((...t)=>o.createClub&&o.createClub(...t),["prevent"])),class:"d-flex flex-column"},[e("div",ke,[_e,k(e("input",{"onUpdate:modelValue":s[4]||(s[4]=t=>o.editable.name=t),type:"text",required:"",minlength:"3",maxlength:"40",class:"form-control",id:"","aria-describedby":"helpId",placeholder:"Club Name"},null,512),[[p,o.editable.name]])]),e("div",ge,[ve,k(e("input",{"onUpdate:modelValue":s[5]||(s[5]=t=>o.editable.coverImg=t),type:"url",required:"",minlength:"3",maxlength:"300",class:"form-control",id:"clubImageURL","aria-describedby":"helpId",placeholder:"Club Image URL"},null,512),[[p,o.editable.coverImg]])]),e("div",fe,[pe,k(e("textarea",{"onUpdate:modelValue":s[6]||(s[6]=t=>o.editable.description=t),type:"text",required:"",minlength:"3",maxlength:"750",class:"form-control",id:"clubDescription","aria-describedby":"helpId",placeholder:"Club Description"},null,512),[[p,o.editable.description]])]),e("div",ye,[e("div",Be,[k(e("input",{"onUpdate:modelValue":s[7]||(s[7]=t=>o.editable.private=t),class:"form-check-input",type:"checkbox",id:"clubPrivate"},null,512),[[V,o.editable.private]]),Ce]),xe])],32)])])])])])):(a(),c("div",Le,Te)),o.account.needsTour?(a(),N(r,{key:2,steps:o.steps,callbacks:o.tourCallBacks},null,8,["steps","callbacks"])):B("",!0)],64)}const Pe=S(R,[["render",we],["__scopeId","data-v-d87e3291"]]);export{Pe as default};
